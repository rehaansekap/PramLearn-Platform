
sequenceDiagram
    participant T as Teacher
    participant F as Frontend (React)
    participant B as Backend API
    participant CSV as CSV Processor
    participant KM as K-Means
    participant DB as Database
    
    Note over T,DB: CSV Upload Flow
    
    T->>+F: Login sebagai teacher
    F->>+B: POST /api/auth/login/
    B-->>-F: Authentication token
    F-->>-T: Dashboard guru
    
    T->>+F: Akses Class Management
    F->>+B: GET /api/teacher/classes/
    B-->>-F: Daftar kelas yang diajar
    F-->>-T: Pilihan kelas
    
    T->>+F: Klik tab "Upload ARCS Data"
    F-->>-T: Upload interface + template download
    
    T->>F: Download template CSV
    F->>T: File arcs_data.csv (template)
    
    T->>+F: Upload file CSV yang sudah diisi
    F->>+B: POST /api/upload-arcs-csv/
    B->>+CSV: sessions_assign_motivation_profiles()
    CSV->>CSV: Validasi format CSV
    CSV->>CSV: Hitung rata-rata per dimensi ARCS
    
    CSV->>+KM: KMeans clustering (k=3)
    KM->>KM: fit_predict(features)
    KM->>KM: Map clusters berdasarkan centroid
    KM-->>-CSV: cluster_labels
    
    CSV->>+DB: Batch update StudentMotivationProfile
    DB-->>-CSV: Profiles updated
    CSV-->>-B: Processing result
    B-->>-F: Success + statistics
    F-->>-T: Konfirmasi upload berhasil
