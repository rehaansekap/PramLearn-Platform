
flowchart TD
    A[Teacher Login] --> B[Akses Class Management]
    B --> C[Pilih Material]
    C --> D[Klik tab 'ARCS Questionnaire']
    
    D --> E[Lihat overview responses siswa]
    E --> F{Apakah ada responses dari siswa?}
    
    F -->|Tidak| G[Tampilkan pesan: Belum ada responses]
    F -->|Ya| H[Tampilkan statistik responses<br/>Contoh: 34 siswa sudah mengisi]
    
    H --> I[Klik 'Trigger Clustering Manual']
    I --> J[Jalankan update_all_motivation_levels]
    
    J --> K[Query semua StudentMotivationProfile<br/>dengan data ARCS lengkap]
    K --> L{Apakah data cukup untuk clustering?}
    
    L -->|Tidak| M[Tampilkan error: Data tidak cukup<br/>Minimal 3 siswa dengan data lengkap]
    L -->|Ya| N[Prepare features untuk clustering]
    
    N --> O[StandardScaler normalization]
    O --> P[K-Means clustering k=3]
    P --> Q[Evaluate cluster centroids]
    Q --> R[Map clusters ke motivation levels<br/>Berdasarkan rata-rata centroid]
    
    R --> S[Update motivation_level semua siswa]
    S --> T[Tampilkan hasil clustering:<br/>- Total profiles updated<br/>- High: X siswa<br/>- Medium: Y siswa<br/>- Low: Z siswa]
    
    T --> U[Export laporan PDF clustering]
    U --> V[Lanjut ke group formation]
    
    G --> W[End]
    M --> W
    V --> W
