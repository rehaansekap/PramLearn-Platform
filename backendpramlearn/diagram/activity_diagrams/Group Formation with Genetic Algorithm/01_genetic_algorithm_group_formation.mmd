
flowchart TD
    A[Teacher sudah selesai ARCS clustering] --> B[Masuk ke tab Groups]
    B --> C[Klik 'Generate Groups']
    C --> D[Pilih mode: Heterogeneous Groups]
    
    D --> E[Validasi data motivation profiles]
    E --> F{Apakah semua siswa punya motivation level?}
    
    F -->|Tidak| G[Tampilkan warning:<br/>Ada siswa yang belum dianalisis]
    F -->|Ya| H[Mulai Genetic Algorithm]
    
    G --> I{Teacher tetap lanjut?}
    I -->|Tidak| J[Cancel group formation]
    I -->|Ya| H
    
    H --> K[Initialize Population<br/>Create random group combinations]
    K --> L[Set parameters:<br/>- Population size: 50<br/>- Max generations: 100<br/>- Mutation rate: 0.1]
    
    L --> M{Loop: Evolusi generasi}
    M --> N[Evaluate Fitness untuk setiap individu:<br/>- Diversity score per kelompok<br/>- Balance score antar kelompok<br/>- Heterogeneity motivation levels]
    
    N --> O[Selection: Tournament selection<br/>Pilih individu terbaik sebagai parent]
    O --> P[Crossover: Swap students antar kelompok<br/>dengan probabilitas crossover]
    P --> Q[Mutation: Random reassignment<br/>dengan probabilitas mutasi]
    
    Q --> R{Apakah sudah convergence<br/>atau max generation?}
    R -->|Tidak| M
    R -->|Ya| S[Pilih solusi terbaik<br/>dari generasi terakhir]
    
    S --> T[Simpan kelompok optimal ke database<br/>Group & GroupMember]
    T --> U[Hitung final quality metrics:<br/>- Heterogeneity score<br/>- Balance score<br/>- Diversity index]
    
    U --> V[Tampilkan hasil group formation:<br/>- Jumlah kelompok terbentuk<br/>- Komposisi motivation level per kelompok<br/>- Quality analysis]
    
    V --> W[Export laporan PDF group formation]
    W --> X[Teacher dapat assign quiz/tasks ke kelompok]
    
    J --> Y[End]
    X --> Y
